<html>
  <head>
    <link href="css/simple.css" rel="stylesheet" type="text/css" media="all">
    <script src='js/jquery.js'></script>

     <!-- Spinners for Ajax loading -->
    <script src='js/ajax_globals.js'></script>

    <!-- Ajax Global Handlers -->
    <script>
      // Fires when DOM is loaded.
      $(document).ready(function(){

        $.get( "http://localhost:3000", function(data){
          var articles = data.articles,
          articlesHTML = '';
          for(var i = 0; i < articles.length; i++){
            articlesHTML += '<li id=article_' + articles[i].id + '>';
            articlesHTML += '<div>' +' TITLE: '+ articles[i].title + ' BODY: ' + articles[i].body + '</div>';
            articlesHTML += '</li>';
          };
          $('#articles').append(articlesHTML);
        });

        $('#new-article').submit(function(event){
          var $form = $(event.target),
          $title = $form.find("input[name='title']"),
          $body = $form.find("input[name='body']"),
          action = $form.attr('action');
          event.preventDefault();
          $.ajax({
              type: "POST",
              url: 'http://localhost:3000/articles',
              data: {article:  {title: $title.val(), body: $body.val()}},
              dataType: 'json',
              success: function(response){
                var article = response.article,
                articleHTML = '<li id=article_' + article.id + '>';
                articleHTML += '<div>' +' TITLE: '+ articles[i].title + ' BODY: ' + articles[i].body + '</div>';
                articleHTML += '</li>';
                $('#articles').append(articleHTML);
              }
            });
          });
        });
    </script>
  </head>
  <body>
    <!-- Ajax Loading Spinner-->
    <div id="ajaxSpinnerContainer" class='centered'>
      <img src="images/ajax-loader.gif" id="ajaxSpinnerImage" title="working...">
    </div>
    <h3>Simple Ajax Get</h3>
    <div id='container'>
      <form id='new-article' action='http://localhost:3000/articles'>
        <input type='text' name='title'placeholder="title">
        <input type='textarea' name='body' placeholder="contents">
        <input type='submit' value='Create'>
      </form>
      <!-- List of all the Articles -->
      <ul id='articles'>Articles
      </ul>
    </div>

  </body>
</html>
